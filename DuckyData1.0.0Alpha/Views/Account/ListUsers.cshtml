@model PagedList.IPagedList<DuckyData1._0._0Alpha.ViewModels.Account.userFlags>
@Styles.Render("~/Content/Account/ListUsers.css")
@using PagedList.Mvc;

<div id="list-user">
    <div class="list-user-header">
        <a href="/Account/PurgeUserFlags" id="PurgeUserFlags">Purge User flags</a>
        <form action="/Account/searchUser" method="post" class="ng-pristine ng-valid">
            <div class="input-group pull-right">
                <input type="text" class="form-control input-sm col-lg-6" id="SearchString" name="SearchString" placeholder="Search for name">
                <span class="input-group-btn pull-left">
                    <button type="submit" class="btn btn-primary btn-sm"> Search </button>
                </span>
            </div>
         </form>
</div>
    <div class="list-user-body">
        <table class="table">
            <tr>
                <th>
                    Email
                </th>
                <th>
                    Flagged
                </th>
                <th>
                    Gagged
                </th>
                <th>
                    Banned
                </th>
                <th></th>
            </tr>

            @foreach(var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Email)
                    </td>
                    @using(Html.BeginForm("EditFlags","Account"))
                    {
                        @Html.AntiForgeryToken()
                        @Html.Hidden("uid",item.Id)
                        <td>
                            @{
                                if(item.flagged)
                                {
                                    @Html.CheckBox("flag",true)
                                }
                                else
                                {
                                    @Html.CheckBox("flag")
                                }
                            }
                        </td>
                        <td>
                            @{
                                if(item.gagged)
                                {
                                    @Html.CheckBox("gag",true)
                                }
                                else
                                {
                                    @Html.CheckBox("gag")
                                }
                            }
                        </td>
                        <td>
                            @{
                                if(item.banned)
                                {
                                    @Html.CheckBox("ban",true)
                                }
                                else
                                {
                                    @Html.CheckBox("ban")
                                }
                            }
                        </td>

                        <td><input type="submit" class="btn btn-xs btn-danger" value="update" /></td>
                                }
                    <td>
                        @Html.ActionLink("Edit","Edit",new { id = item.Id }) |
                        @Html.ActionLink("Details","Details",new { id = item.Id }) <br />
                        @{
                            var tmp = Html.Action("LockoutStatus",new { id = item.Id });
                            if(tmp.ToString() == "False")
                            {
                                @Html.ActionLink("Deactivate","Deactivate",new { id = item.Id })
                            }
                            else
                            {
                                @Html.ActionLink("Activate","Activate",new { id = item.Id })
                            }
                        }
                    </td>
                </tr>
                }
        </table>
    </div>
    <div class="list-user-footer">
        @Html.PagedListPager(Model,page => Url.Action("ListUsers",new { page }))
    </div>
</div>